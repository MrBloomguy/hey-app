"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5102],{95150:(e,s,t)=>{t.d(s,{A:()=>A});var a=t(65723),i=t(7006),l=t(11369),r=t(74421),n=t(24187),d=t(5519),c=t(99777),o=t(14834),u=t(3817),m=t(68243),x=t(45571),h=t(22155),p=t(98345),j=t(44940),v=t(1814);let g={ranges:[],screenTop:0},A=e=>{var s,t;let{list:A,showHeader:y=!1}=e,{fetchAndStoreViews:f}=(0,j.B)(),{fetchAndStoreTips:w}=(0,v.J)(),N=(0,h.useRef)(null);(0,h.useEffect)(()=>{g={ranges:[],screenTop:0}},[A.id]);let b=async e=>{try{let{data:s}=await x.A.get("".concat(c.uI,"/lists/posts"),{params:{id:e}});return null==s?void 0:s.result}catch(e){return[]}},{data:k,isLoading:C,error:S}=(0,m.I)({queryFn:()=>b(A.id),queryKey:["getListPosts",A.id]}),L={limit:o.gTn.TwentyFive,where:{publicationIds:k}},{data:E,loading:P,error:I}=(0,o.jvo)({onCompleted:async e=>{var s;let{publications:t}=e,a=(null==t?void 0:null===(s=t.items)||void 0===s?void 0:s.map(e=>{var s;return"Mirror"===e.__typename?null===(s=e.mirrorOn)||void 0===s?void 0:s.id:e.id}))||[];await f(a),await w(a)},skip:!(null==k?void 0:k.length),variables:{request:L}}),F=(null==E?void 0:null===(s=E.publications)||void 0===s?void 0:s.items)||[];if(C||P)return(0,a.jsx)(r.A,{});let z=()=>y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"m-5 flex items-center justify-between",children:[(0,a.jsx)(n.A,{list:A}),(0,a.jsx)(l.A,{list:A,small:!0})]}),(0,a.jsx)("div",{className:"divider"})]}):null;return(null==F?void 0:F.length)===0?(0,a.jsxs)(u.Zp,{children:[(0,a.jsx)(z,{}),(0,a.jsx)(u.pp,{icon:(0,a.jsx)(d.A,{className:"size-8"}),message:"No posts found",hideCard:!0})]}):S||I?(0,a.jsxs)(u.Zp,{children:[(0,a.jsx)(z,{}),(0,a.jsx)(u.Kw,{error:S||I,title:"Failed to load list feed"})]}):(0,a.jsxs)(u.Zp,{children:[(0,a.jsx)(z,{}),(0,a.jsx)(p.aY,{className:"virtual-divider-list-window",computeItemKey:(e,s)=>"".concat(s.id,"-").concat(e),data:F,isScrolling:e=>{if(!e){var s;null==N||null===(s=N.current)||void 0===s||s.getState(e=>{g={...e}})}},itemContent:(e,s)=>(0,a.jsx)(i.A,{isFirst:0===e,isLast:e===((null==F?void 0:F.length)||0)-1,post:s}),ref:N,restoreStateFrom:0===g.ranges.length?null==g?void 0:null===(t=g.current)||void 0===t?void 0:t.getState(e=>e):g,useWindowScroll:!0})]})}},25102:(e,s,t)=>{t.d(s,{A:()=>U});var a=t(65723),i=t(45507),l=t(8226),r=t(56495),n=t(99777),d=t(74716),c=t(50343),o=t(3817),u=t(68243),m=t(91983),x=t(22155),h=t(1615),p=t(55358),j=t(84865),v=t(5849),g=t(22690),A=t(62231),y=t(76631),f=t(14834),w=t(45571),N=t(7606),b=t.n(N),k=t(98345);let C=e=>{let{listId:s,name:t}=e,{currentAccount:i}=(0,j.E)(),l=async()=>{try{let{data:e}=await w.A.get("".concat(n.uI,"/lists/accounts"),{params:{id:s}});return null==e?void 0:e.result}catch(e){return[]}},{data:r,error:c,isLoading:m}=(0,u.I)({enabled:!!s,queryFn:l,queryKey:["getListProfiles",s]}),{data:x,error:h,loading:p}=(0,f.wCx)({skip:!(null==r?void 0:r.length),variables:{request:{where:{profileIds:r}}}}),N=(null==x?void 0:x.profiles.items)||[];return m||p?(0,a.jsx)(o.Zp,{children:(0,a.jsx)(v.A,{})}):0===N.length?(0,a.jsx)(o.pp,{icon:(0,a.jsx)(A.A,{className:"size-8"}),message:(0,a.jsxs)("div",{children:[(0,a.jsxs)("b",{className:"mr-1",children:["/",t]}),(0,a.jsx)("span",{children:"doesn't have any profiles."})]})}):c||h?(0,a.jsx)(o.Kw,{className:"m-5",error:c||h,title:"Failed to load profiles"}):(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-5",children:[(0,a.jsx)(b(),{href:"/lists/".concat(s),children:(0,a.jsx)(y.A,{className:"size-5"})}),(0,a.jsx)(o.H5,{children:"Profiles"})]}),(0,a.jsx)("div",{className:"divider"}),(0,a.jsx)(k.aY,{className:"virtual-divider-list-window",computeItemKey:(e,s)=>"".concat(s.id,"-").concat(e),data:N,itemContent:(e,s)=>(0,a.jsx)("div",{className:"p-5",children:(0,a.jsx)(g.A,{hideFollowButton:(null==i?void 0:i.id)===s.id,hideUnfollowButton:(null==i?void 0:i.id)===s.id,account:s,showBio:!0,showUserPreview:!1,source:d.vH.ListAccounts})}),useWindowScroll:!0})]})};var S=t(92527),L=t(11369),E=t(50504),P=t(46073),I=t(18489),F=t(60907),z=t(17629),T=t(88591);let q=e=>{let{list:s}=e,{currentAccount:t}=(0,j.E)(),[i,l]=(0,x.useState)(null),[r,d]=(0,x.useState)(!1);return(0,a.jsxs)(o.Zp,{as:"aside",className:"mb-4 space-y-5 p-5",children:[(0,a.jsx)(o._V,{alt:s.name,className:"size-24 rounded-lg border bg-gray-200 dark:border-gray-700",height:128,onClick:()=>l(s.avatar?(0,F.A)((0,z.A)(s.avatar),n.QR):n.GA),src:s.avatar?(0,F.A)((0,z.A)(s.avatar),n.of):n.GA,width:128}),(0,a.jsx)(o.Qb,{onClose:()=>l(null),url:i}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(o.H5,{children:s.name}),s.description?(0,a.jsx)("div",{className:"markup linkify mr-0 break-words text-md",children:(0,a.jsx)(E.A,{mentions:(0,P.A)(s.description),children:s.description})}):null]}),(0,a.jsxs)("div",{className:"mt-5 flex gap-8",children:[(0,a.jsxs)(b(),{className:"text-left outline-offset-4",href:"/lists/".concat(s.id,"/accounts"),children:[(0,a.jsx)(o.H4,{children:(0,I.A)(s.totalAccounts)}),(0,a.jsx)("div",{className:"ld-text-gray-500",children:(0,T.A)("Profile",s.totalAccounts)})]}),(0,a.jsxs)("div",{className:"text-left outline-offset-4",children:[(0,a.jsx)(o.H4,{children:(0,I.A)(s.totalPins)}),(0,a.jsx)("div",{className:"ld-text-gray-500",children:(0,T.A)("Pin",s.totalPins)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.A,{list:s}),(null==t?void 0:t.id)===s.createdBy&&(0,a.jsx)(o.$n,{onClick:()=>d(!0),children:"Edit"})]}),(0,a.jsx)(o.aF,{onClose:()=>d(!1),show:r,title:"Edit List",children:(0,a.jsx)(S.A,{list:s})})]})};var Z=t(95150),K=t(74421);let _=e=>{let{profileList:s=!1}=e;return(0,a.jsxs)(o.JT,{children:[(0,a.jsx)(o.$l,{children:s?(0,a.jsx)(o.Zp,{children:(0,a.jsx)(v.A,{})}):(0,a.jsx)(K.A,{})}),(0,a.jsxs)(o.an,{children:[(0,a.jsxs)(o.Zp,{className:"mb-4 space-y-5 p-5",children:[(0,a.jsx)("div",{className:"shimmer size-24 rounded-xl ring-8 ring-gray-50 dark:bg-gray-700 dark:ring-black"}),(0,a.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,a.jsx)("div",{className:"shimmer h-5 w-1/3 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-3 w-1/4 rounded-lg"})]}),(0,a.jsx)("div",{className:"flex gap-5 pt-2",children:Array.from({length:2}).map((e,s)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"shimmer size-7 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-3 w-20 rounded-lg"})]},s))}),(0,a.jsx)("div",{className:"shimmer h-[34px] w-20 rounded-full"})]}),(0,a.jsx)(l.A,{})]})]})},U=()=>{let{isReady:e,pathname:s,query:{id:t}}=(0,m.useRouter)(),{currentAccount:v}=(0,j.E)(),g="/lists/[id]/accounts"===s;(0,x.useEffect)(()=>{e&&r.s.track(d.zQ,{page:"list",subpage:s.replace("/lists/[id]","")})},[t]);let{data:A,error:y,isLoading:f}=(0,u.I)({enabled:!!t,queryFn:()=>(0,c.A)({id:t,viewingId:null==v?void 0:v.id}),queryKey:[c.T,t]});return!e||f?(0,a.jsx)(_,{profileList:g}):A?y?(0,a.jsx)(p.default,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{description:A.description||"",title:"".concat(A.name," â€¢ ").concat(n.C3)}),(0,a.jsxs)(o.JT,{children:[(0,a.jsx)(o.$l,{className:"space-y-5",children:g?(0,a.jsx)(C,{listId:A.id,name:A.name}):(0,a.jsx)(Z.A,{list:A})}),(0,a.jsxs)(o.an,{children:[(0,a.jsx)(q,{list:A}),(0,a.jsx)(l.A,{})]})]})]}):(0,a.jsx)(h.default,{})}},92527:(e,s,t)=>{t.d(s,{A:()=>N});var a=t(65723),i=t(11438),l=t(5360),r=t(12632),n=t(21811),d=t(69456),c=t(99777),o=t(90098),u=t(50343),m=t(60907),x=t(17629),h=t(12005),p=t(3817),j=t(80364),v=t(45571),g=t(91983),A=t(22155),y=t(38700),f=t(4180);let w=(0,f.Ik)({name:(0,f.Yj)().min(3,{message:"Name should be at least 3 characters"}).max(100,{message:"Name should not exceed 100 characters"}),description:(0,f.Yj)().max(500,{message:"Description should not exceed 500 characters"}).optional()}),N=e=>{let{list:s}=e,{push:t}=(0,g.useRouter)(),[f,N]=(0,A.useState)(""),[b,k]=(0,A.useState)(""),[C,S]=(0,A.useState)(!1),[L,E]=(0,A.useState)(""),[P,I]=(0,A.useState)(null),[F,z]=(0,A.useState)(!1),[T,q]=(0,A.useState)(!1),Z=(0,j.jE)(),K=(0,p.Lk)({schema:w});(0,A.useEffect)(()=>{s&&(K.setValue("name",s.name),K.setValue("description",s.description||""),k(s.avatar||""))},[s]);let _=async e=>{let{name:a,description:i}=e;try{q(!0);let{data:e}=await v.A.post("".concat(c.uI,"/lists/").concat(s?"update":"create"),{id:null==s?void 0:s.id,name:a,description:i,avatar:b||void 0},{headers:(0,d.r)()});s&&Z.invalidateQueries({queryKey:[u.T,s.id]}),y.Ay.success("List ".concat(s?"updated":"created")),t("/lists/".concat(null==e?void 0:e.result.id))}catch(e){(0,n.A)(e)}finally{q(!1)}},U=async()=>{try{let e=await (0,h.nJ)(f,P);if(!e)return y.Ay.error(o.I.SomethingWentWrong);z(!0);let s=await (0,r.A)(e),t=e.toDataURL("image/png");k(s),E(t)}catch(e){(0,n.A)(e)}finally{S(!1),z(!1)}},B=async e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];t&&(N(await (0,r.T)(t)),S(!0))},R=f?(0,m.A)((0,x.A)(f),c.of):"";return(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)(p.lV,{className:"space-y-4",form:K,onSubmit:_,children:[(0,a.jsx)(p.pd,{label:"Name",placeholder:"John Doe",...K.register("name")}),(0,a.jsx)(p.fs,{label:"Description",placeholder:"Please provide additional details about the list",...K.register("description")}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("div",{className:"label",children:"Avatar"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(p._V,{alt:"Avatar crop preview",className:"size-40 rounded-lg",onError:e=>{let{currentTarget:s}=e;s.src=(0,x.A)(b)},src:L||R||(0,x.A)(b)}),(0,a.jsx)(i.A,{onChange:B})]})]}),(0,a.jsx)(p.$n,{className:"flex w-full justify-center",disabled:T,type:"submit",children:T?s?"Updating...":"Creating...":s?"Update":"Create"})]}),(0,a.jsx)(p.aF,{onClose:()=>{N(""),S(!1)},show:C,size:"sm",title:"Crop avatar",children:(0,a.jsxs)("div",{className:"p-5 text-right",children:[(0,a.jsx)(l.A,{imageSrc:f,setCroppedAreaPixels:I,targetSize:{height:300,width:300}}),(0,a.jsx)(p.$n,{disabled:F||!f,onClick:U,type:"submit",children:"Upload"})]})})]})}},11369:(e,s,t)=>{t.d(s,{A:()=>h});var a=t(65723),i=t(21811),l=t(69456),r=t(99777),n=t(50343),d=t(3817),c=t(80364),o=t(45571),u=t(22155),m=t(38700),x=t(53310);let h=e=>{let{list:s,small:t=!1}=e,[h,p]=(0,u.useState)(!1),{pinnedLists:j,setPinnedLists:v}=(0,x.b)(),g=(0,c.jE)(),A=async()=>{try{p(!0),await o.A.post("".concat(r.uI,"/lists/pin"),{id:s.id,pin:!s.pinned},{headers:(0,l.r)()}),s.pinned?v(j.filter(e=>e.id!==s.id)):v([...j,s]),g.setQueryData([n.T,s.id],e=>({...e,pinned:!s.pinned,totalPins:e.totalPins+(s.pinned?-1:1)})),m.Ay.success("List ".concat(s.pinned?"unpinned":"pinned"))}catch(e){(0,i.A)(e)}finally{p(!1)}};return(0,a.jsx)(d.$n,{"aria-label":"Pin",disabled:h,onClick:A,outline:!0,size:t?"sm":"md",children:s.pinned?"Unpin":"Pin"})}},53310:(e,s,t)=>{t.d(s,{b:()=>d});var a=t(82380),i=t(19301),l=t(30055),r=t(42441);let n=(0,l.v)((0,r.Zr)(e=>({pinnedLists:[],setPinnedLists:s=>e(()=>({pinnedLists:s}))}),{name:a.l.PinnedListStore})),d=(0,i.q)(n)},50343:(e,s,t)=>{t.d(s,{A:()=>r,T:()=>l});var a=t(99777),i=t(45571);let l="getList",r=async e=>{try{let{data:s}=await i.A.get("".concat(a.uI,"/lists/get"),{params:e});return null==s?void 0:s.result}catch(e){return null}}},5519:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(22155);let i=a.forwardRef(function(e,s){let{title:t,titleId:i,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":i},l),t?a.createElement("title",{id:i},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.068.157 2.148.279 3.238.364.466.037.893.281 1.153.671L12 21l2.652-3.978c.26-.39.687-.634 1.153-.67 1.09-.086 2.17-.208 3.238-.365 1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))})}}]);