(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1743],{1452:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/staff/permissions",function(){return t(23828)}])},861:(e,s,t)=>{"use strict";t.d(s,{A:()=>g});var r=t(65723),a=t(19429),i=t(3817),l=t(36018),n=t(91983),c=t(22155),d=t(45199),o=t(51673);let u=e=>{let{items:s}=e,{pathname:t}=(0,n.useRouter)(),u=s.filter(e=>(null==e?void 0:e.enabled)!==!1),[m,x]=(0,c.useState)(u.find(e=>e.url===t)||u[0]);return(0,r.jsx)("div",{className:"mb-4 space-y-2",children:(0,r.jsx)(a.W1,{as:"div",className:"relative",children:e=>{let{open:s}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.IU,{className:(0,l.A)("flex w-full items-center space-x-2 rounded-xl border border-gray-300 bg-white px-3 py-2 text-left outline-none focus:border-gray-500 focus:ring-gray-400 dark:border-gray-700 dark:bg-gray-800",{"bg-gray-200 text-black dark:bg-gray-800 dark:text-white":s,"text-gray-700 hover:bg-gray-200 hover:text-black dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white":!s}),children:[m.icon,(0,r.jsx)("div",{children:m.title})]}),(0,r.jsx)(d.A,{children:(0,r.jsx)(a.c,{className:"absolute z-10 mt-2 w-full",static:!0,children:(0,r.jsx)(i.Zp,{forceRounded:!0,children:u.map(e=>(0,r.jsxs)(a.Dr,{as:o.S,className:s=>{let{focus:t}=s;return(0,l.A)({"dropdown-active":t||m===e},"m-2 flex items-center space-x-2 rounded-lg p-2")},href:e.url,onClick:()=>x(e),children:[e.icon,(0,r.jsx)("div",{children:e.title})]},e.url))})})})]})}})})};var m=t(7606),x=t.n(m);let h=e=>{let{children:s,current:t,url:a}=e;return(0,r.jsx)(x(),{className:(0,l.A)({"font-bold text-black dark:text-white":t},{"bg-gray-300 dark:bg-gray-300/20":t},"hover:bg-gray-300 dark:hover:bg-gray-300/30","hover:text-black hover:dark:text-white","flex items-center space-x-2 rounded-lg px-3 py-2"),href:a,children:s})},f=e=>{let{items:s}=e,{pathname:t}=(0,n.useRouter)(),a=s.filter(e=>!1!==e.enabled);return(0,r.jsx)("div",{className:"mb-4 space-y-2 px-3 sm:px-0",children:a.map(e=>(0,r.jsxs)(h,{current:t===e.url||!0===e.active,url:e.url,children:[e.icon,(0,r.jsx)("div",{children:e.title})]},e.title))})},g=e=>{let{items:s}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"hidden lg:block",children:(0,r.jsx)(f,{items:s})}),(0,r.jsx)("div",{className:"block lg:hidden",children:(0,r.jsx)(u,{items:s})})]})}},36790:(e,s,t)=>{"use strict";t.d(s,{A:()=>x});var r=t(65723),a=t(861),i=t(22155);let l=i.forwardRef(function(e,s){let{title:t,titleId:r,...a}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),t?i.createElement("title",{id:r},t):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"}))});var n=t(73180),c=t(26952),d=t(73574),o=t(54299),u=t(97638);let m=[{icon:(0,r.jsx)(l,{className:"size-4"}),title:"Overview",url:"/staff"},{icon:(0,r.jsx)(n.A,{className:"size-4"}),title:"Revenue",url:"/staff/revenue"},{icon:(0,r.jsx)(c.A,{className:"size-4"}),title:"Stats",url:"/staff/stats"},{icon:(0,r.jsx)(d.A,{className:"size-4"}),title:"Users",url:"/staff/users"},{icon:(0,r.jsx)(n.A,{className:"size-4"}),title:"Tokens",url:"/staff/tokens"},{icon:(0,r.jsx)(o.A,{className:"size-4"}),title:"Permissions",url:"/staff/permissions"},{icon:(0,r.jsx)(u.A,{className:"size-4"}),title:"Signup",url:"/staff/signup"}],x=()=>(0,r.jsx)("div",{className:"mb-4 px-3 sm:px-0",children:(0,r.jsx)(a.A,{items:m})})},23828:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>I});var r=t(65723),a=t(45507),i=t(56495),l=t(99777),n=t(88253),c=t(74716),d=t(3817),o=t(17702),u=t(22155),m=t(1615),x=t(84865),h=t(36790),f=t(96898),g=t(69456),j=t(54299),p=t(19281),v=t(59932),k=t(18195),b=t(36018),y=t(68243),w=t(21811),A=t(45571),N=t(38700),E=t(4180);let S=(0,E.Ik)({ids:(0,E.Yj)().regex(/0x[\dA-Fa-f]+/g,{message:"Invalid profile IDs"})}),_=e=>{let{permission:s,setShowAssignModal:t}=e,[a,n]=(0,u.useState)(!1),o=(0,d.Lk)({schema:S}),m=async e=>{let{ids:r}=e;try{n(!0);let{data:e}=await A.A.post("".concat(l.uI,"/internal/permissions/bulkAssign"),{id:s.id,ids:r},{headers:(0,g.r)()});n(!1),t(!1),N.Ay.success("Assigned permission to ".concat(e.assigned," users")),i.s.track(c.eY.PERMISSIONS.BULK_ASSIGN)}catch(e){(0,w.A)(e)}};return(0,r.jsxs)(d.lV,{className:"m-5 space-y-4",form:o,onSubmit:m,children:[(0,r.jsx)(d.fs,{placeholder:'Profile IDs, Eg: ["0x0d", "0x05"]',rows:5,...o.register("ids")}),(0,r.jsx)(d.$n,{disabled:a,type:"submit",children:"Assign"})]})},C=()=>{let[e,s]=(0,u.useState)(!1),[t,a]=(0,u.useState)(null),[i,l]=(0,u.useState)([]),{error:n,isLoading:c}=(0,y.I)({queryFn:()=>(0,v.A)((0,g.r)()).then(e=>(l(e),e)),queryKey:[v.L],refetchInterval:1e4});return(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{title:"Permissions"}),(0,r.jsx)("div",{className:"m-5",children:c?(0,r.jsx)(f.A,{className:"my-10",message:"Loading permissions..."}):n?(0,r.jsx)(d.Kw,{error:n,title:"Failed to load permissions"}):i.length?(0,r.jsx)("div",{className:"space-y-7",children:null==i?void 0:i.map(t=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("b",{className:(0,b.A)((t.key===p.a.Suspended||t.key===p.a.CommentSuspended)&&"text-red-500"),children:t.key}),(0,r.jsx)(d.Ex,{variant:"secondary",children:t.type}),0!==t._count.profiles&&(0,r.jsxs)(d.Ex,{variant:"warning",children:[t._count.profiles," assigned"]})]}),(0,r.jsxs)("div",{className:"text-gray-500 text-sm",children:["Created on ",(0,k.A)(t.createdAt)]})]}),(0,r.jsx)("div",{className:"mt-2 space-x-2",children:(0,r.jsx)(d.$n,{onClick:()=>{a(t),s(!e)},outline:!0,size:"sm",children:"Assign"})})]},t.id))}):(0,r.jsx)(d.pp,{hideCard:!0,icon:(0,r.jsx)(j.A,{className:"size-8"}),message:(0,r.jsx)("span",{children:"No permissions found"})})}),(0,r.jsx)(d.aF,{onClose:()=>s(!1),show:e,title:"Assign permission - ".concat(null==t?void 0:t.key),children:t?(0,r.jsx)(_,{permission:t,setShowAssignModal:s}):null})]})},I=()=>{let{currentAccount:e}=(0,x.E)(),s=(0,o._P)(n.T.Staff);return((0,u.useEffect)(()=>{i.s.track(c.zQ,{page:"staff-tools",subpage:"permission"})},[]),e&&s)?(0,r.jsxs)(d.JT,{children:[(0,r.jsx)(a.A,{title:"Staff Tools • Permissions • ".concat(l.C3)}),(0,r.jsx)(d.an,{children:(0,r.jsx)(h.A,{})}),(0,r.jsx)(d.$l,{children:(0,r.jsx)(C,{})})]}):(0,r.jsx)(m.default,{})}},59932:(e,s,t)=>{"use strict";t.d(s,{A:()=>l,L:()=>i});var r=t(99777),a=t(45571);let i="getAllPermissions",l=async e=>{let{data:s}=await a.A.get("".concat(r.uI,"/internal/permissions/all"),{headers:e});return(null==s?void 0:s.result)||[]}},54299:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var r=t(22155);let a=r.forwardRef(function(e,s){let{title:t,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},i),t?r.createElement("title",{id:a},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))})},97638:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var r=t(22155);let a=r.forwardRef(function(e,s){let{title:t,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},i),t?r.createElement("title",{id:a},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))})}},e=>{var s=s=>e(e.s=s);e.O(0,[636,6593,8792],()=>s(1452)),_N_E=e.O()}]);